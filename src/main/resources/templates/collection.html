<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
    <title>DVD-Changer: Home Page</title>
</head>
<body>
<h1>DVD-changer:</h1>

<div id="navigationMenu">
	<ul>
		<li><a href="/collection">Моя коллекция</a></li>
		<li><a href="/newDisk">Новый диск</a></li>
		<li><a href="/freeDisks">Доступные диски</a></li>
		<li><a href="/takenDisks">Взятые диски</a></li>
		<li><a href="/users">Пользователи системы</a></li>
	</ul>
</div>
<h2>Мои диски</h2>
<hr />
<div id="disksCollection">
	<ul>
		<li th:each="disk : ${user.disks}">
			<span th:text="${disk.movieTitle}">Title</span>
			<span th:if="${disk.taken}">, взят пользователем&nbsp;<span th:text="${disk.taken.tenant.name}">User</span></span>
		</li>
	</ul>
</div>
<h2>Взятые мной</h2>
<hr />
<form th:action="@{/returnDisk}" method="post">
	<input type="hidden" name="tiId" id="tiId" />
	<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
	<div id="rentedDisks">
		<ul>
			<li th:each="ti : ${takenByMe}">
				<span th:text="${ti.disk.movieTitle}">Title</span>, владелец&nbsp;<span th:text="${ti.disk.owner.name}">User</span>
				<button type="submit" th:onclick="'javascript:returnDisk(\'' + ${ti.id} + '\');'">Отдать</button>
			</li>
		</ul>
	</div>
</form>
<script>
	function returnDisk(tiId) {
		document.getElementById('tiId').value=tiId;
	}
</script>

</body>
</html>